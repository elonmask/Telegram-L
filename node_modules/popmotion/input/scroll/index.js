"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var listen_1 = require("../listen");
var action_1 = require("../../action");
var transformers_1 = require("../../transformers");
var framesync_1 = require("framesync");
var measureWindowScroll = function () { return ({
    x: window.pageXOffset,
    y: window.pageYOffset
}); };
var measureElementScroll = function (element) { return function () { return ({
    x: element.scrollLeft,
    y: element.scrollTop
}); }; };
var getY = function (_a) {
    var y = _a.y;
    return y;
};
var noop = function (v) { return v; };
var scroll = function (_a) {
    var _b = _a.from, from = _b === void 0 ? 0 : _b, _c = _a.to, to = _c === void 0 ? 1 : _c, element = _a.element, trigger = _a.trigger;
    return action_1.default(function (_a) {
        var update = _a.update;
        var measureScroll = element instanceof Document
            ? measureWindowScroll
            : measureElementScroll(element);
        var isNum = typeof from === 'number';
        var getPosition = isNum ? getY : noop;
        var updateScrollPosition = transformers_1.pipe(measureScroll, getPosition, update);
        var sub = listen_1.default(element, 'resize scroll')
            .start(function () { return framesync_1.onFrameUpdate(updateScrollPosition); });
        return {
            stop: function () { return sub.unsubscribe(); }
        };
    });
};
exports.default = scroll;
//# sourceMappingURL=index.js.map